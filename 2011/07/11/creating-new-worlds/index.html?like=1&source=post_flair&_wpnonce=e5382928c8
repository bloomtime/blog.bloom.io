<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="UTF-8" />
<title>Creating new worlds &laquo; Bloom Blog</title>
<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="stylesheet" href="/style.css" type="text/css" media="screen" />
<!--[if IE]><link rel="stylesheet" href="/ie.css" type="text/css" media="screen" /><![endif]-->



		<link rel="alternate" type="application/rss+xml" title="Bloom Blog &raquo; Feed" href="http://blog.bloom.io/feed/" />
<link rel="alternate" type="application/rss+xml" title="Bloom Blog &raquo; Comments Feed" href="http://blog.bloom.io/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Bloom Blog &raquo; Creating new&nbsp;worlds Comments Feed" href="http://blog.bloom.io/2011/07/11/creating-new-worlds/feed/" />
<script type="text/javascript">
/* <![CDATA[ */
function addLoadEvent(func){var oldonload=window.onload;if(typeof window.onload!='function'){window.onload=func;}else{window.onload=function(){oldonload();func();}}}
/* ]]> */
</script>
<link rel='stylesheet' id='all-css-0' href='/all.css' type='text/css' media='all' />
<link rel='stylesheet' id='print-css-0' href='/global-print.css' type='text/css' media='print' />
<script type='text/javascript'>
/* <![CDATA[ */
var LoggedOutFollow = {"invalid_email":"Your subscription did not succeed, please try again with a valid email address."};
/* ]]> */
</script>
<script type='text/javascript' src='http://s2.wp.com/_static/??/wp-includes/js/jquery/jquery.js,/wp-content/blog-plugins/loggedout-follow/widget.js,/wp-includes/js/comment-reply.min.js?m=1354137473j'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://bloomio.wordpress.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://bloomio.wordpress.com/wp-includes/wlwmanifest.xml" />
<link rel='prev' title='Bloom is&nbsp;Hiring' href='http://blog.bloom.io/2011/06/09/bloom-is-hiring/' />
<link rel='next' title='Planetary, Version&nbsp;2' href='http://blog.bloom.io/2011/09/11/planetary-version-2/' />
<meta name="generator" content="WordPress.com" />
<link rel='canonical' href='http://blog.bloom.io/2011/07/11/creating-new-worlds/' />
<link rel='shortlink' href='http://wp.me/p1hmxS-2R' />
<link rel="alternate" type="application/json+oembed" href="http://public-api.wordpress.com/oembed/1.0/?format=json&amp;url=http%3A%2F%2Fblog.bloom.io%2F2011%2F07%2F11%2Fcreating-new-worlds%2F&amp;for=wpcom-auto-discovery" /><link rel="alternate" type="application/xml+oembed" href="http://public-api.wordpress.com/oembed/1.0/?format=xml&amp;url=http%3A%2F%2Fblog.bloom.io%2F2011%2F07%2F11%2Fcreating-new-worlds%2F&amp;for=wpcom-auto-discovery" />
<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article" />
<meta property="og:title" content="Creating new&nbsp;worlds" />
<meta property="og:url" content="http://blog.bloom.io/2011/07/11/creating-new-worlds/" />
<meta property="og:description" content="During the last couple years, I have become addicted to science shows: particularly shows about astronomy. Everything about the subject fascinates me. Shortly after I joined Bloom, we started worki..." />
<meta property="og:site_name" content="Bloom Blog" />
<meta property="og:image" content="http://i1.wp.com/farm6.static.flickr.com/5044/5273267039_359f048d1e_z.jpg?fit=400%2C400" />
<meta property="og:image" content="http://i1.wp.com/farm4.static.flickr.com/3331/5774236619_b4102a76e5_b.jpg?fit=400%2C400" />
<meta property="og:image" content="http://i0.wp.com/farm6.static.flickr.com/5030/5774775138_1d6b598525_b.jpg?fit=400%2C400" />
<meta property="og:image" content="http://i2.wp.com/farm3.static.flickr.com/2759/5774863602_0529cf22b9_b.jpg?fit=400%2C400" />
<meta property="og:image" content="http://i0.wp.com/farm3.static.flickr.com/2748/5774775246_45f4d379b6_b.jpg?fit=400%2C400" />
<meta property="og:image" content="http://i0.wp.com/farm3.static.flickr.com/2467/5774775302_8299ca9b61_b.jpg?fit=400%2C400" />
<meta property="og:image" content="http://i0.wp.com/farm4.static.flickr.com/3112/5774236845_d5ea344b81_b.jpg?fit=400%2C400" />
<meta property="og:image" content="http://i2.wp.com/farm3.static.flickr.com/2387/5795186401_ee567c17be_z.jpg?fit=400%2C400" />
<meta property="og:image" content="http://i0.wp.com/farm3.static.flickr.com/2430/5795294311_44759c4512.jpg?fit=400%2C400" />
<meta property="og:image" content="http://i0.wp.com/farm6.static.flickr.com/5152/5795853520_a92d6961c3.jpg?fit=400%2C400" />
<meta property="og:image" content="http://i0.wp.com/farm3.static.flickr.com/2358/5774775364_9f387b5835_b.jpg?fit=400%2C400" />
<meta property="og:image" content="http://i0.wp.com/farm7.static.flickr.com/6025/5921216598_13f70978d0_z.jpg?fit=400%2C400" />
<meta property="og:image" content="http://i1.wp.com/farm7.static.flickr.com/6145/5921264374_da57323c83_z.jpg?fit=400%2C400" />
<meta property="og:image" content="http://i1.wp.com/farm4.static.flickr.com/3473/5763055153_d3696c7e09_b.jpg?fit=400%2C400" />
<meta name="twitter:site" content="@wordpressdotcom" />
<meta name="twitter:image" content="http://i1.wp.com/farm6.static.flickr.com/5044/5273267039_359f048d1e_z.jpg" />
<meta name="twitter:card" content="summary" />
<link rel="shortcut icon" type="image/x-icon" href="http://s2.wp.com/i/favicon.ico?m=1311976022g" sizes="16x16 24x24 32x32 48x48" />
<link rel="icon" type="image/x-icon" href="http://s2.wp.com/i/favicon.ico?m=1311976022g" sizes="16x16 24x24 32x32 48x48" />
<link rel="apple-touch-icon-precomposed" href="http://s0.wp.com/i/webclip.png?m=1311618091g" />
<link rel='openid.server' href='http://bloomio.wordpress.com/?openidserver=1' />
<link rel='openid.delegate' href='http://bloomio.wordpress.com/' />
<link rel="search" type="application/opensearchdescription+xml" href="http://blog.bloom.io/osd.xml" title="Bloom Blog" />
<link rel="search" type="application/opensearchdescription+xml" href="http://wordpress.com/opensearch.xml" title="WordPress.com" />
		<style>
		/* <![CDATA[ */
		/* Block: reblog */

		.reblog-from img                   { margin: 0 10px 0 0; vertical-align: middle; padding: 0; border: 0; }
		.reblogger-note img.avatar         { float: left; padding: 0; border: 0; }
		.reblogger-note-content            { margin: 0 0 20px; }
		.reblog-post .wpcom-enhanced-excerpt-content { border-left: 3px solid #eee; padding-left: 15px; }
		.reblog-post ul.thumb-list         { display: block; list-style: none; margin: 2px 0; padding: 0; clear: both; }
		.reblog-post ul.thumb-list li      { display: inline; margin: 0; padding: 0 1px; border: 0; }
		.reblog-post ul.thumb-list li a    { margin: 0; padding: 0; border: 0; }
		.reblog-post ul.thumb-list li img  { margin: 0; padding: 0; border: 0; }

		.reblog-post .wpcom-enhanced-excerpt { clear: both; }

		.reblog-post .wpcom-enhanced-excerpt address,
		.reblog-post .wpcom-enhanced-excerpt li,
		.reblog-post .wpcom-enhanced-excerpt h1,
		.reblog-post .wpcom-enhanced-excerpt h2,
		.reblog-post .wpcom-enhanced-excerpt h3,
		.reblog-post .wpcom-enhanced-excerpt h4,
		.reblog-post .wpcom-enhanced-excerpt h5,
		.reblog-post .wpcom-enhanced-excerpt h6,
		.reblog-post .wpcom-enhanced-excerpt p { font-size: 100% !important; }

		.reblog-post .wpcom-enhanced-excerpt blockquote,
		.reblog-post .wpcom-enhanced-excerpt pre,
		.reblog-post .wpcom-enhanced-excerpt code,
		.reblog-post .wpcom-enhanced-excerpt q { font-size: 98% !important; }


		/* ]]> */
		</style>
		<script type="text/javascript" src="//use.typekit.net/rdl4muo.js"></script><script type="text/javascript">try{Typekit.load();}catch(e){}</script>
<meta name="application-name" content="Bloom Blog" /><meta name="msapplication-window" content="width=device-width;height=device-height" /><meta name="msapplication-tooltip" content="Pop-cultural instruments for data expression and exploration." /><meta name="msapplication-task" content="name=Subscribe;action-uri=http://blog.bloom.io/feed/;icon-uri=http://s2.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=Sign up for a free blog;action-uri=http://wordpress.com/signup/;icon-uri=http://s2.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=WordPress.com Support;action-uri=http://support.wordpress.com/;icon-uri=http://s2.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=WordPress.com Forums;action-uri=http://forums.wordpress.com/;icon-uri=http://s2.wp.com/i/favicon.ico" /><meta name="title" content="Creating new&nbsp;worlds | Bloom Blog on WordPress.com" />
<meta name="description" content="During the last couple years, I have become addicted to science shows: particularly shows about astronomy. Everything about the subject fascinates me. Shortly after I joined Bloom, we started working on a new way to visualize and explore your iPad music collection. While coming up with concepts to explore, I stumbled upon the following image.&hellip;" />
		<link rel="stylesheet" type="text/css" href="http://s0.wp.com/?custom-css=1&#038;csblog=1hmxS&#038;cscache=6&#038;csrev=26" />
		</head>

<body class="single single-post postid-177 single-format-standard typekit-enabled color-light highlander-enabled highlander-light">

<div id="wrapper">

	<div class="header">
		<div id="logo">
		<h1><a href="http://blog.bloom.io">Bloom Blog</a></h1>
		<h2>Pop-cultural instruments for data expression and exploration.</h2>
		</div>

		<div id="nav">
			<ul>
	</ul>
		</div>

			</div>


	<div class="content">


		<div class="navigation nav-above">
			<div class="alignleft">&larr; <a href="http://blog.bloom.io/2011/09/11/planetary-version-2/" rel="next">Planetary, Version&nbsp;2</a></div>
			<div class="alignright"><a href="http://blog.bloom.io/2011/06/09/bloom-is-hiring/" rel="prev">Bloom is&nbsp;Hiring</a> &rarr;</div>
		</div>

		<div class="post-177 post type-post status-publish format-standard hentry category-planetary tag-ipad tag-planetary-2 tag-post-mortem tag-process" id="post-177">
			<h1>Creating new&nbsp;worlds</h1>
			<small class="post-meta"><span class="post-date"><b>Posted:</b> July 11, 2011</span> <span class="author-link">| <b>Author:</b> <a href="http://blog.bloom.io/author/flight404/" title="Posts by flight404" rel="author">flight404</a></span> <span class="meta-sep">|</span> <span class="cat-links"><b>Filed under:</b> <a href="http://blog.bloom.io/category/planetary/" title="View all posts in Planetary" rel="category tag">Planetary</a></span> <span class="tag-links"> | <b>Tags:</b> <a href="http://blog.bloom.io/tag/ipad/" rel="tag">ipad</a>, <a href="http://blog.bloom.io/tag/planetary-2/" rel="tag">planetary</a>, <a href="http://blog.bloom.io/tag/post-mortem/" rel="tag">post-mortem</a>, <a href="http://blog.bloom.io/tag/process/" rel="tag">process</a></span> <span class="edit-link"></span> <span class="meta-sep">|</span><span class="comments-link"><a href="http://blog.bloom.io/2011/07/11/creating-new-worlds/#comments" title="Comment on Creating new&nbsp;worlds"><strong>12</strong> Comments &#187;</a></span></small>
			<p>During the last couple years, I have become addicted to science shows: particularly shows about astronomy. Everything about the subject fascinates me. Shortly after I joined Bloom, we started working on a new way to visualize and explore your iPad music collection. While coming up with concepts to explore, I stumbled upon the following image.</p>
<p><a href="http://www.flickr.com/photos/planetaryrings/"><img src="http://farm6.static.flickr.com/5044/5273267039_359f048d1e_z.jpg" alt="" width="580" /></a></p>
<p>This photo, taken by the Cassini probe, was the original inspiration for the Planetary app. We decided to model the iPad music library after a model of a solar system. Several solar systems in fact. Each star in our universe will be an artist in your music library. Each of these stars will be orbited by planets representing albums. Each planet will have a moon system with each moon representing a track.</p>
<p><a href="http://www.flickr.com/photos/63241925@N04/sets/72157626689258131/"><img class="alignnone" title="Planetary Comp" src="http://farm4.static.flickr.com/3331/5774236619_b4102a76e5_b.jpg" alt="" width="580" height="290" /></a></p>
<p>After establishing this initial premise, many more details fell into place. All of the artists in your collection would be a galaxy. Groupings of stars, either by filter or by playlist, would be constellations. The look of the planets would be derived from genre information mixed with album art. The speed of the orbit would be related to track length. So many options!</p>
<h2><strong>Getting Started</strong></h2>
<p>The first hurdle was to get some content onto the iPad. Happily, Ryan Alexander had already been working on an iPad music library. We ended up using Cinder for the job partially because it is the platform that I have been working with for a couple years but also because Cinder plays quite well with the iPad.</p>
<p>I needed to get up to speed with doing recursive node structures so I coded up a project that would put a dot on the screen. When you tapped this dot, it would create a bunch of orbiting child-dots. These children could also be tapped, creating even more child nodes. This prototype took less than a day to create and I naively thought we would be done with the whole thing in a week, max. Silly me.</p>
<h2><a href="http://www.flickr.com/photos/63241925@N04/sets/72157626689258131/"><img class="alignnone" title="Force-Directed nodes" src="http://farm6.static.flickr.com/5030/5774775138_1d6b598525_b.jpg" alt="" width="580" height="290" /></a></h2>
<h2>Two Dimensions is plenty of dimensions</h2>
<p>A couple days later, we implemented the iPad music library code and had our first working music library visualization. It was top-down, two dimensional, the lighting was baked into the texture, it used placeholder 2D planet graphics, and the text layout was far from elegant. But it worked. And even in this initial stage, it started to show its potential.</p>
<h2><a href="http://www.flickr.com/photos/63241925@N04/sets/72157626689258131/"><img class="alignnone" title="Planetary 1st Draft" src="http://farm3.static.flickr.com/2759/5774863602_0529cf22b9_b.jpg" alt="" width="580" height="290" /></a></h2>
<p>Someone raised the point that they thought it could be 3D. I got nervous. I had already quietly considered this option, then abandoned it. In my experience, going from 2D to 3D makes the experience approximately 15000% harder. There are so many new things to have to worry about. You have to make things look good at many different scales. You have to create a robust camera model for moving through the space. You have to implement a 3D picker. But for me, the bit that was going to be the hardest was coming up with a solution for rendering the planets and moons.</p>
<p>With a top-down 2D simulation, you can load in a ton of pre-made 2D graphics and you never have to worry about what might happen if the user viewed the planet from a different angle. With the 2D version, you can easily use flat circular graphics to represent the planets. With 3D, you would have to shift to drawing spheres. You could use billboarded 2D graphics (these are images that always align their face towards the camera so you never see the 2D graphic edge-on) but you would then lose a lot of the control of the lighting. And since we were going to show bright stars against a dark background, the lighting model would have to be highly tuned to keep from looking flat or dated. Plus, there is a ton of music out there. If we wanted to represent every single album ever made with a unique graphic, we could not rely solely on pre-made planet images.</p>
<h2>The Era of Additive Blending</h2>
<p>A quick and lazy solution to many of the problems associated with the switch from 2D to 3D is to simply make everything glow. I made the planets and moons glow as brightly as the stars. In fact, it would be pointless to even refer to them as planets and moons anymore. I enabled additive blending and everything became a star.</p>
<p>With additive blending, you can use flat images of glowing circles instead of spheres. You can render the content in whatever order you want. Best of all, the idea of a &#8216;planet surface&#8217; goes completely away and you save yourself weeks of work. Everything is all aglow and mission accomplished.</p>
<p><a href="http://www.flickr.com/photos/63241925@N04/sets/72157626689258131/"><img class="alignnone" title="Planetary 2nd Draft" src="http://farm3.static.flickr.com/2748/5774775246_45f4d379b6_b.jpg" alt="" width="580" height="290" /></a></p>
<p>Enter friend and original beta-tester, Tom Coates.</p>
<p>Tom : &#8220;You can&#8217;t have stars orbiting other stars. That just doesn&#8217;t happen.&#8221;</p>
<p>Me : &#8220;But some star systems have multiple stars. They orbit each other.&#8221;</p>
<p>Tom: &#8220;Yes, but those are multi-star systems. They aren&#8217;t stars orbiting other stars orbiting still other stars. This is stupid. You guys are stupid.&#8221;</p>
<p>My inaccurate re-imagining of Tom Coates had a point.</p>
<p><span class="Apple-style-span" style="font-size:20px;font-weight:bold;">Return of the spheres</span></p>
<p>There were many unknowns but the one that made me the most worried was whether or not the iPad could handle drawing so many spheres. We quickly swapped in a drawSphere() where it was previously drawing a 2D graphic for each track and planet.</p>
<p>Happily, the iPad handled it like a pro. Even with albums featuring 30 or more tracks, the frame rate stayed at a happy 60. More importantly, it started to look fantastic.</p>
<h2><a href="http://www.flickr.com/photos/63241925@N04/sets/72157626689258131/"><img class="alignnone" title="Planetary 3rd Draft" src="http://farm3.static.flickr.com/2467/5774775302_8299ca9b61_b.jpg" alt="" width="580" height="290" /></a></h2>
<p>It was time to start thinking more about the look of the planets and moons. The stars were easy. At this point, they were still just 2D graphics. Still no reason to render the stars with spheres because it was going to be overkill. A star in space is going to look like a glowing circle, no matter what angle you view it. But the planets did not glow. They needed to reflect light from the star. They needed to have a dark side. They needed to have a rich surface texture. It would be great if they could have clouds. And they might each have many orbiting moons which all needed to have the same attention to detail.</p>
<p>And speaking of detail, we also needed to figure out a good system for controlling the level of detail based on distance from the camera. The planet that is really far away and has a screen radius of a couple pixels does not require a high resolution sphere. It would be waste of computing power. Additionally, any planets with cloud layers would require us to draw two spheres, one for the planet surface and a slightly larger one for the cloud layer. But again, with planets that are really far away, the cloud layer didn&#8217;t need to be rendered at all because you just wouldn&#8217;t see it.</p>
<p>In order to speed things up, we created 4 different vertex arrays representing 4 different resolutions of sphere. This helped a great deal and even with many high resolution nearby planets, the frame rate kept humming along. We did run into some errors along the way. In my first attempt at coding a vertex array sphere from scratch, I messed something up and these fantastic abstract forms filled the sky.</p>
<p><a href="http://www.flickr.com/photos/63241925@N04/sets/72157626689258131/"><img class="alignnone" title="Planetary 4th Draft" src="http://farm4.static.flickr.com/3112/5774236845_d5ea344b81_b.jpg" alt="" width="580" height="290" /></a></p>
<h2>Surfacing the planets</h2>
<p>Now that we had our spheres, what to put on them? We considered just slapping on the album art but we knew that would just look odd. And what would we do for albums that have no album art? It was time to do a bit of pixel by pixel manipulation.</p>
<p>The creation of the planet surface is a 4 step process.</p>
<p><img class="alignnone" src="http://farm3.static.flickr.com/2387/5795186401_ee567c17be_z.jpg" alt="" width="603" height="604" /></p>
<p>1) Grab a rectangular block of pixels from around the center of the album art. The size and position of the block you grab would be based on the number of tracks that album has combined with a integer representation of the album name. This way, the planet representing Stateless&#8217;s album &#8216;Matilda&#8217; should look the same on my iPad as it does on yours. If the album art is missing, we skip right to step 3.</p>
<p>2) Make it a mirror image by doubling the image but horizontally reversing one side. This is a quick and easy way to deal with the seam line that what would appear if you just used the non-mirrored version. The seams are still there but their impact is minimized by the mirroring.</p>
<p>3) To make the planet surface a bit more rugged and rough, we add in some additional texture directly on the image. This additional texture is derived from images provided by NASA. We use combinations of photos taken of the surface of Mercury, Venus, Earth, Mars and the cloud patterns from Jupiter. These extra details are burned into our album art graphic.</p>
<p>4) Finally, we add a cloud layer. As we haven&#8217;t found a fast enough way to do dynamic clouds (maybe on the iPad 3 or 4?) we ended up using prepared graphics of the earth&#8217;s cloud layer, some modified images from NASA&#8217;s Blue Marble venture, and some zoomed and cropped textures from our own Flickr images. This cloud layer is actually rendered as a separate slightly larger sphere so it can rotate independent of the planet.</p>
<p>The moons are done similarly. The moon textures are even smaller crops from different parts of the original album art. So with the above example for the Matilda album, you might end up with moons that are solid red orbiting next to a moon that is purple with a blue stripe.</p>
<div class="wp-caption alignnone" style="width: 590px"><img src="http://farm3.static.flickr.com/2430/5795294311_44759c4512.jpg" alt="" width="580" height="310" /><p class="wp-caption-text">Worlds without atmosphere</p></div>
<p>After implementing this 4 step process, the planets still felt like they were missing something. They felt really small. Like marbles. And they also felt very lifeless. They had a barren quality. These planets needed an implication of complexity which would hint at the possibility of life. These planets needed atmosphere.</p>
<div class="wp-caption alignnone" style="width: 590px"><img src="http://farm6.static.flickr.com/5152/5795853520_a92d6961c3.jpg" alt="" width="580" height="310" /><p class="wp-caption-text">Worlds with atmosphere</p></div>
<p>This was a little tricky. It isn&#8217;t as easy as rendering a slightly larger semi-transparent sphere around the planet. You would still end up with a hard edge instead of a fuzzy glow. The solution we chose uses a billboarded graphic of a fuzzy glowing ring and it is drawn at the same position and screen size as the planet. Not only does this give the appearance of an atmosphere, but it helps to mask the aliased edges of the sphere (anti-aliasing is not currently supported on the iPad). With this process, we were able to create a really lush variety of different looks for the planets and moons.</p>
<p>In order to keep the atmosphere graphic aligned with the silhouette of the planet sphere, we had to use <a href="http://www.lighthouse3d.com/opengl/billboarding/index.php?billSphe">spherical billboarding</a>. With regular billboarding (as seen in the 1.0 release), as the planet moved to the edge of the screen it would begin to warp. The FOV of your camera model dictates just how much warping occurs. And once the sphere is warped, the billboard atmosphere stops aligning with the sphere itself and the illusion is broken. With the soon-to-be-updated version of Planetary, spherical billboarding corrects this misalignment by also warping the billboard texture.</p>
<p><a href="http://www.flickr.com/photos/63241925@N04/sets/72157626689258131/"><img class="alignnone" title="Planetary Teaser" src="http://farm3.static.flickr.com/2358/5774775364_9f387b5835_b.jpg" alt="" width="580" height="290" /></a></p>
<h2>Physical Characteristics</h2>
<p>The iPad allows you to access most of the metadata that is available in the iPod app which gets its data when you sync to iTunes on the desktop. We use the playcount to control the size of the moon. The higher the playcount, the larger the radius of the moon. The track that is played the most on an album will have a cloud layer and a denser atmosphere. Additionally, the time it takes for a moon to make one full revolution is equal to the duration of the track.</p>
<p>The planets are similarly affected by the iPod library data. The distance at which a planet orbits around its star is related to the release date of the album and the size of the planet is based on the number of tracks on the album.</p>
<p><span class="Apple-style-span" style="font-size:20px;font-weight:bold;">Special Effects!</span></p>
<p>There has been some serious code optimization since Planetary was released. The nice thing about optimizing code is it frees up some CPU load to add more visual effects. An effect I was anxious to try coding was a realistic eclipse effect. I have never seen an eclipse in real life, but rest assured I will be ready when a <a href="http://www.eclipse2017.org/ECLIPSE2017_main.HTM">total solar eclipse sweeps across the US from Oregon to Georgia in 2017</a>. I researched the effect by watching different videos of an eclipse taking place.</p>
<p>I knew there needed to be a coronal flare. I knew the foreground planet should be in total darkness with a bloom of light around the edge. These were fairly easy to code up once you figure out the math for doing circle/circle area of intersect. The part I hadn&#8217;t anticipated being difficult was simulating a nice (faked) HDR light effect. This is a common effect in modern immersive first-person shooters. As you look at the sun or other super bright objects, the rest of the view needs to dim and adjust contrast to simulate what it would be like to look at something much much brighter than anything a computer monitor could represent.</p>
<p>This ended up taking a lot of trial and error. In the end, most of the effect is controlled by adjusting the size of the graphic representing the star&#8217;s outer glow. As an eclipse begins, this glow slowly increases. When the eclipse reaches near totality, the outer glow drops abruptly as does the amount of light falling on the eclipsing planet. Together with a some extra dust and smoke textures, a nice eclipse effect is achieved.</p>
<p>And as Tom continued to squeeze more FPS out of the app, I continued to refine this effect by adding shadows cast onto the accretion disk. I didn&#8217;t want to do actual cast shadows because it would be too heavy an implementation for the minimal effect I was looking for. So instead, I researched circle/circle tangents to figure out how to draw the eclipse if it were two circles instead of two spheres. Keeping in the world of 2D made the math pretty trivial. I then just draw a few textured triangles with very low opacity and you get nice but very subtle shadows, complete with distinct umbra and penumbra sections (as shown below in outlines).</p>
<p><a href="http://www.flickr.com/photos/63241925@N04/5921216598"><img class="alignnone" title="Planetary Teaser" src="http://farm7.static.flickr.com/6025/5921216598_13f70978d0_z.jpg" alt="" width="580" height="405" /></a></p>
<p>Here is the final effect. It is very subtle but definitely adds to the realism of the simulation.<br />
<a href="http://www.flickr.com/photos/63241925@N04/5921216626"><img class="alignnone" title="Planetary Teaser" src="http://farm7.static.flickr.com/6145/5921264374_da57323c83_z.jpg" alt="" width="580" height="435" /></a></p>
<h2>The Future</h2>
<p>We are working hard to put out an update to Planetary which will include a few of the most requested features as well as a revamping of the graphics. We are definitely excited about eventually switching to OpenGL ES 2.0 so that we can use GLSL shaders to handle many of the effects but with much more zeal and gumption. Stay tuned for more information about the release date and feature list.</p>
<p>In the meantime version 1.0 of <a href="http://planetary.bloom.io">Planetary</a> for iPad is still available as a <a href="http://itunes.apple.com/app/planetary/id432462305">free download from the App Store</a>.</p>
<p><a href="http://www.flickr.com/photos/63241925@N04/sets/72157626689258131/"><img class="alignnone" title="Planetary Teaser" src="http://farm4.static.flickr.com/3473/5763055153_d3696c7e09_b.jpg" alt="" width="580" height="773" /></a></p>
<div id="jp-post-flair" class="sharedaddy sd-like-enabled sd-sharing-enabled"><div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-icon-text sd-sharing"><h3 class="sd-title">Share this:</h3><div class="sd-content"><ul><li class="share-twitter"><a rel="nofollow" class="share-twitter sd-button share-icon" href="http://blog.bloom.io/2011/07/11/creating-new-worlds/?share=twitter" title="Click to share on Twitter" id="sharing-twitter-177"><span>Twitter</span></a></li><li class="share-facebook"><a rel="nofollow" class="share-facebook sd-button share-icon" href="http://blog.bloom.io/2011/07/11/creating-new-worlds/?share=facebook" title="Share on Facebook" id="sharing-facebook-177"><span>Facebook</span></a></li><li><a href="#" class="sharing-anchor sd-button share-more"><span>More</span></a></li><li class="share-end"></li></ul><div class="sharing-hidden"><div class="inner" style="display: none;"><ul><li class="share-stumbleupon"><a rel="nofollow" class="share-stumbleupon sd-button share-icon" href="http://blog.bloom.io/2011/07/11/creating-new-worlds/?share=stumbleupon" title="Click to share on StumbleUpon"><span>StumbleUpon</span></a></li><li class="share-reddit"><a rel="nofollow" class="share-reddit sd-button share-icon" href="http://blog.bloom.io/2011/07/11/creating-new-worlds/?share=reddit" title="Click to share on Reddit"><span>Reddit</span></a></li><li class="share-end"></li><li class="share-digg"><a rel="nofollow" class="share-digg sd-button share-icon" href="http://blog.bloom.io/2011/07/11/creating-new-worlds/?share=digg" title="Click to Digg this post"><span>Digg</span></a></li><li class="share-email"><a rel="nofollow" class="share-email sd-button share-icon" href="http://blog.bloom.io/2011/07/11/creating-new-worlds/?share=email" title="Click to email this to a friend"><span>Email</span></a></li><li class="share-end"></li><li class="share-end"></li></ul></div></div><div class="sharing-clear"></div></div></div></div><div class="wpl-likebox sd-block sd-like"><h3 class="sd-title">Like this:</h3><div class="sd-content"><div id="like-177" class="wpl-button "><a href='http://blog.bloom.io/2011/07/11/creating-new-worlds/?like=1&amp;source=post_flair&amp;_wpnonce=e5382928c8' title='I like this.' class='like needs-login sd-button' rel='nofollow'><span>Like</span></a></div><div class="wpl-count sd-like-count"><span class="wpl-count-number">3</span> bloggers like this.</div><ul class="wpl-avatars sd-like-gravatars"><li><a href="http://gravatar.com/novichkovnet" title="novichkovnet" class="wpl-liker" rel="nofollow"><img src='http://0.gravatar.com/avatar/6ee7d33a89043a4f6649f2753b10825c?s=30&amp;d=retro&amp;r=G' class='avatar avatar-30' alt='novichkovnet' width='30' height='30' /></a></li><li><a href="http://gravatar.com/makelovelynotwhore" title="makelovelynotwhore" class="wpl-liker" rel="nofollow"><img src='http://2.gravatar.com/avatar/e163564800bfec90bd181983cb2b68bf?s=30&amp;d=retro&amp;r=G' class='avatar avatar-30' alt='makelovelynotwhore' width='30' height='30' /></a></li><li><a href="http://gravatar.com/rsodre" title="rsodre" class="wpl-liker" rel="nofollow"><img src='http://1.gravatar.com/avatar/a5e5ad1906919bf3228a3458ec4fd700?s=30&amp;d=retro&amp;r=G' class='avatar avatar-30' alt='rsodre' width='30' height='30' /></a></li></ul></div></div></div>						<hr/>
		</div>


<div id="comments">


	<h3>12 Comments on &#8220;Creating new&nbsp;worlds&#8221;</h3>

	<div class="navigation">
			</div>

	<ol class="commentlist">
				<li class="comment even thread-even depth-1 highlander-comment" id="comment-116">
				<div id="div-comment-116" class="comment-body">
				<div class="comment-author vcard">
		<img alt='' src='http://2.gravatar.com/avatar/e3adca09411887c6316d0e383b5b9833?s=26&amp;d=retro&amp;r=G' class='avatar avatar-26' height='26' width='26' />		<cite class="fn">james</cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://blog.bloom.io/2011/07/11/creating-new-worlds/#comment-116">
			July 12, 2011 at 1:09 am</a>		</div>

		<p>Great work guys, my friend showed me this today and it trulya remarkable app.</p>
<p>The tragedy though is that i have an Asus transformer running 3.1 honeycomb&#8230;and this epic app is only for ipads!</p>
<p>Tell me your working on android version PLEASE</p>
<p>Thanks,<br />
James</p>

		<div class="reply">
				</div>
				</div>
		</li>
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-117">
				<div id="div-comment-117" class="comment-body">
				<div class="comment-author vcard">
		<img alt='' src='http://2.gravatar.com/avatar/5552c450f089c25da615db666e331137?s=26&amp;d=retro&amp;r=G' class='avatar avatar-26' height='26' width='26' />		<cite class="fn"><a href='http://fcolaco.com/' rel='external nofollow' class='url'>Fernando Colaco</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://blog.bloom.io/2011/07/11/creating-new-worlds/#comment-117">
			July 12, 2011 at 3:07 am</a>		</div>

		<p>Brilliant!</p>

		<div class="reply">
				</div>
				</div>
		</li>
		<li class="comment even thread-even depth-1 parent highlander-comment" id="comment-118">
				<div id="div-comment-118" class="comment-body">
				<div class="comment-author vcard">
		<img alt='' src='http://2.gravatar.com/avatar/b78446f857933a87776bffd44ec66f98?s=26&amp;d=retro&amp;r=G' class='avatar avatar-26' height='26' width='26' />		<cite class="fn"><a href='http://mattwilcox.net' rel='external nofollow' class='url'>Matt Wilcox</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://blog.bloom.io/2011/07/11/creating-new-worlds/#comment-118">
			July 12, 2011 at 3:49 am</a>		</div>

		<p>Why can I find no links here to Planetary itself!?</p>

		<div class="reply">
				</div>
				</div>
		<ul class='children'>
		<li class="comment byuser comment-author-tomcarden odd alt depth-2 highlander-comment" id="comment-120">
				<div id="div-comment-120" class="comment-body">
				<div class="comment-author vcard">
		<img alt='' src='http://2.gravatar.com/avatar/8eb29630732aecd29eb0d4de23023e12?s=26&amp;d=retro&amp;r=G' class='avatar avatar-26' height='26' width='26' />		<cite class="fn">Tom Carden</cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://blog.bloom.io/2011/07/11/creating-new-worlds/#comment-120">
			July 12, 2011 at 9:59 am</a>		</div>

		<p>Good catch Matt, I just added links to <a href="http://planetary.bloom.io" rel="nofollow">Planetary&#8217;s homepage</a> and <a href="http://itunes.apple.com/app/planetary/id432462305" rel="nofollow">Planetary on the App Store</a> at the end of the post!</p>

		<div class="reply">
				</div>
				</div>
		</li>
</ul>
</li>
		<li class="comment even thread-odd thread-alt depth-1 highlander-comment" id="comment-119">
				<div id="div-comment-119" class="comment-body">
				<div class="comment-author vcard">
		<img alt='' src='http://0.gravatar.com/avatar/640131890f28b9e29fd9e4a59129c428?s=26&amp;d=retro&amp;r=G' class='avatar avatar-26' height='26' width='26' />		<cite class="fn"><a href='http://www.adrianparr.com' rel='external nofollow' class='url'>Adrian Parr</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://blog.bloom.io/2011/07/11/creating-new-worlds/#comment-119">
			July 12, 2011 at 8:37 am</a>		</div>

		<p>Robert, This looks awesome! Nice work!</p>

		<div class="reply">
				</div>
				</div>
		</li>
		<li class="comment odd alt thread-even depth-1 highlander-comment" id="comment-121">
				<div id="div-comment-121" class="comment-body">
				<div class="comment-author vcard">
		<img alt='' src='http://i2.wp.com/a3.twimg.com/profile_images/1250292855/DSC_3156_normal.png?resize=26%2C26' class='avatar avatar-26' height='26' width='26' />		<cite class="fn"><a href='http://twitter.com/mrdoob' rel='external nofollow' class='url'>Mr.doob</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://blog.bloom.io/2011/07/11/creating-new-worlds/#comment-121">
			July 12, 2011 at 6:55 pm</a>		</div>

		<p>Can&#8217;t wait to see how it ends up with custom shader <img src='http://s0.wp.com/wp-includes/images/smilies/icon_biggrin.gif?m=1129645325g' alt=':D' class='wp-smiley' /> </p>

		<div class="reply">
				</div>
				</div>
		</li>
		<li class="pingback even thread-odd thread-alt depth-1 highlander-comment" id="comment-122">
				<div id="div-comment-122" class="comment-body">
				<div class="comment-author vcard">
				<cite class="fn"><a href='http://infovore.org/archives/2011/07/13/links-for-june-21st-through-july-13th/' rel='external nofollow' class='url'>Infovore &raquo; Links for June 21st through July 13th</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://blog.bloom.io/2011/07/11/creating-new-worlds/#comment-122">
			July 13, 2011 at 9:17 am</a>		</div>

		<p>[...] Creating new worlds &laquo; Bloom Blog &quot;I needed to get up to speed with doing recursive node structures so I coded up a project that would put a dot on the screen. When you tapped this dot, it would create a bunch of orbiting child-dots. These children could also be tapped, creating even more child nodes. This prototype took less than a day to create and I naively thought we would be done with the whole thing in a week, max. Silly me.&quot; [...]</p>

		<div class="reply">
				</div>
				</div>
		</li>
		<li class="comment odd alt thread-even depth-1 highlander-comment" id="comment-123">
				<div id="div-comment-123" class="comment-body">
				<div class="comment-author vcard">
		<img alt='' src='http://i0.wp.com/a3.twimg.com/profile_images/1144680720/Ratatouille_Party_040_normal.jpg?resize=26%2C26' class='avatar avatar-26' height='26' width='26' />		<cite class="fn"><a href='http://twitter.com/Krombein' rel='external nofollow' class='url'>Jon Krombein</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://blog.bloom.io/2011/07/11/creating-new-worlds/#comment-123">
			July 13, 2011 at 12:01 pm</a>		</div>

		<p>This is a brilliant concept.</p>
<p>I&#8217;d love to see an additional relationship integration between artists based on band members, songs writers, labels, etc&#8230; something like the relational interactions at <a href="http://www.liveplasma.com" rel="nofollow">http://www.liveplasma.com</a></p>

		<div class="reply">
				</div>
				</div>
		</li>
		<li class="comment even thread-odd thread-alt depth-1 parent highlander-comment" id="comment-124">
				<div id="div-comment-124" class="comment-body">
				<div class="comment-author vcard">
		<img alt='' src='http://2.gravatar.com/avatar/868260cd64bf04a9636338726ad5029c?s=26&amp;d=retro&amp;r=G' class='avatar avatar-26' height='26' width='26' />		<cite class="fn">tim</cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://blog.bloom.io/2011/07/11/creating-new-worlds/#comment-124">
			July 13, 2011 at 4:16 pm</a>		</div>

		<p>if an artist is a star, and playlist is a constellation, then how can you have an artist in more than one playlist?</p>

		<div class="reply">
				</div>
				</div>
		<ul class='children'>
		<li class="comment byuser comment-author-tomcarden odd alt depth-2 highlander-comment" id="comment-125">
				<div id="div-comment-125" class="comment-body">
				<div class="comment-author vcard">
		<img alt='' src='http://2.gravatar.com/avatar/8eb29630732aecd29eb0d4de23023e12?s=26&amp;d=retro&amp;r=G' class='avatar avatar-26' height='26' width='26' />		<cite class="fn">Tom Carden</cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://blog.bloom.io/2011/07/11/creating-new-worlds/#comment-125">
			July 13, 2011 at 4:36 pm</a>		</div>

		<p>can&#8217;t you have a star in more than one constellation? and if not, why not? <img src='http://s0.wp.com/wp-includes/images/smilies/icon_smile.gif?m=1129645325g' alt=':)' class='wp-smiley' /> </p>

		<div class="reply">
				</div>
				</div>
		</li>
</ul>
</li>
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-126">
				<div id="div-comment-126" class="comment-body">
				<div class="comment-author vcard">
		<img alt='' src='http://0.gravatar.com/avatar/f0785fb2c95792e4f9077ae03333dd90?s=26&amp;d=retro&amp;r=G' class='avatar avatar-26' height='26' width='26' />		<cite class="fn"><a href='http://circlecube.com' rel='external nofollow' class='url'>Evan Mullins</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://blog.bloom.io/2011/07/11/creating-new-worlds/#comment-126">
			July 14, 2011 at 12:35 pm</a>		</div>

		<p>totally awesome!</p>

		<div class="reply">
				</div>
				</div>
		</li>
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-127">
				<div id="div-comment-127" class="comment-body">
				<div class="comment-author vcard">
		<img alt='' src='http://i0.wp.com/graph.facebook.com/566768782/picture?q=type%3Dlarge%26_md5%3D61daa520e141ad3c87836ae20556379c&#038;resize=26%2C26' class='avatar avatar-26' height='26' width='26' />		<cite class="fn"><a href='http://www.facebook.com/yul000' rel='external nofollow' class='url'>Khairul Rizal</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://blog.bloom.io/2011/07/11/creating-new-worlds/#comment-127">
			July 16, 2011 at 11:05 pm</a>		</div>

		<p>Im blown away with this music player. Just hope can search music by song name in the future. If u need any beta testers im always here for u..</p>

		<div class="reply">
				</div>
				</div>
		</li>
	</ol>

	<div class="navigation">
			</div>




</div>


		<div class="navigation">
			<div class="alignleft">&larr; <a href="http://blog.bloom.io/2011/09/11/planetary-version-2/" rel="next">Planetary, Version&nbsp;2</a></div>
			<div class="alignright"><a href="http://blog.bloom.io/2011/06/09/bloom-is-hiring/" rel="prev">Bloom is&nbsp;Hiring</a> &rarr;</div>
		</div>


	</div>

	<div id="sidebar">

							<div class="block">
				<h3>Recent Posts</h3>
				<ul>
														<li><a href="http://blog.bloom.io/2012/11/01/this-bloom-is-off-the-vine/" title="Permalink to This Bloom is off the&nbsp;Vine">This Bloom is off the&nbsp;Vine</a></li>
														<li><a href="http://blog.bloom.io/2012/03/08/introducing-biologic/" title="Permalink to Introducing&nbsp;Biologic">Introducing&nbsp;Biologic</a></li>
														<li><a href="http://blog.bloom.io/2011/09/16/https-ssl-table-stakes/" title="Permalink to SSL and HTTPS are Table&nbsp;Stakes">SSL and HTTPS are Table&nbsp;Stakes</a></li>
														<li><a href="http://blog.bloom.io/2011/09/11/planetary-version-2/" title="Permalink to Planetary, Version&nbsp;2">Planetary, Version&nbsp;2</a></li>
														<li><a href="http://blog.bloom.io/2011/07/11/creating-new-worlds/" title="Permalink to Creating new&nbsp;worlds">Creating new&nbsp;worlds</a></li>
												</ul>
			</div>

		<div class="block">
			<h3>Archives</h3>
				<ul>
					<li><a href='http://blog.bloom.io/2012/11/' title='November 2012'>November 2012</a></li>
	<li><a href='http://blog.bloom.io/2012/03/' title='March 2012'>March 2012</a></li>
	<li><a href='http://blog.bloom.io/2011/09/' title='September 2011'>September 2011</a></li>
	<li><a href='http://blog.bloom.io/2011/07/' title='July 2011'>July 2011</a></li>
	<li><a href='http://blog.bloom.io/2011/06/' title='June 2011'>June 2011</a></li>
	<li><a href='http://blog.bloom.io/2011/05/' title='May 2011'>May 2011</a></li>
	<li><a href='http://blog.bloom.io/2011/04/' title='April 2011'>April 2011</a></li>
	<li><a href='http://blog.bloom.io/2011/03/' title='March 2011'>March 2011</a></li>
	<li><a href='http://blog.bloom.io/2011/02/' title='February 2011'>February 2011</a></li>
	<li><a href='http://blog.bloom.io/2011/01/' title='January 2011'>January 2011</a></li>
				</ul>
		</div>

		<div class="block">
			<h3>Categories</h3>
				<ul>
						<li class="cat-item cat-item-471410"><a href="http://blog.bloom.io/category/biologic/" title="View all posts filed under Biologic">Biologic</a>
</li>
	<li class="cat-item cat-item-51364291"><a href="http://blog.bloom.io/category/cartagram/" title="View all posts filed under Cartagram">Cartagram</a>
</li>
	<li class="cat-item cat-item-64622127"><a href="http://blog.bloom.io/category/cto-hat/" title="View all posts filed under CTO-Hat">CTO-Hat</a>
</li>
	<li class="cat-item cat-item-1043300"><a href="http://blog.bloom.io/category/fizz/" title="View all posts filed under Fizz">Fizz</a>
</li>
	<li class="cat-item cat-item-113932"><a href="http://blog.bloom.io/category/hiring/" title="View all posts filed under Hiring">Hiring</a>
</li>
	<li class="cat-item cat-item-171"><a href="http://blog.bloom.io/category/meta/" title="View all posts filed under Meta">Meta</a>
</li>
	<li class="cat-item cat-item-192018"><a href="http://blog.bloom.io/category/planetary/" title="View all posts filed under Planetary">Planetary</a>
</li>
	<li class="cat-item cat-item-42375"><a href="http://blog.bloom.io/category/talks/" title="View all posts filed under Talks">Talks</a>
</li>
				</ul>
		</div>

		<div class="block">
			<h3>Elsewhere</h3>
	<ul class='xoxo blogroll'>
<li><a href="http://bloom.io" rel="me" title="Everything that’s not our blog.">Bloom Home</a></li>
<li><a href="http://twitter.com/databloom" title="Short updates, news and conversation about Bloom">Bloom on Twitter</a></li>

	</ul>

		</div>

		</div>
			<div id="footer">
				<a href="http://wordpress.com/?ref=footer" rel="generator">Blog at WordPress.com</a>.
				Theme: <a href="http://theme.wordpress.com/credits/blog.bloom.io/" title="Learn more about how this site is customized with the Custom Design upgrade">Customized Clean Home</a> by Mid Mo Design.			</div><!-- #footer -->

<script type="text/javascript">
var _qevents = _qevents || [], wpcomQuantcastData = {"qacct":"p-18-mFEk4J448M","labels":",language.en,type.wpcom,posttag.ipad,posttag.planetary-2,posttag.post-mortem,posttag.process"};
function wpcomQuantcastPixel( labels, options ) {
	var i, defaults = wpcomQuantcastData, data = { event: 'ajax' };

	labels  = labels  || '';
	options = options || {};

	if ( typeof labels != 'string' )
		options = labels;

	for ( i in defaults ) {
		data[i] = defaults[i];
	}

	for ( i in options ) {
		data[i] = options[i];
	}

	if ( data.labels ) {
		data.labels += ',' + labels;
	} else {
		data.labels = labels;
	}

	_qevents.push( data );
};
(function() {var elem = document.createElement('script');elem.src = (document.location.protocol == "https:" ? "https://secure" : "http://edge") + ".quantserve.com/quant.js";elem.async = true;elem.type = "text/javascript";var scpt = document.getElementsByTagName('script')[0];scpt.parentNode.insertBefore(elem, scpt);  })();
_qevents.push( wpcomQuantcastData );
</script>
<noscript><div style="display: none;"><img src="//pixel.quantserve.com/pixel/p-18-mFEk4J448M.gif?labels=%2Clanguage.en%2Ctype.wpcom%2Cposttag.ipad%2Cposttag.planetary-2%2Cposttag.post-mortem%2Cposttag.process" height="1" width="1" alt="" /></div></noscript>


	<script type="text/javascript">
	/* <![CDATA[ */
	(function($){
		$(document).on( 'ready post-load', function() {

			// Remove the login box when clicking the page
			$( document ).mousedown( function( e ) {
				if ( null == $( e.target ).closest( '#wpl-mustlogin' ).get( 0 ) ) {
					$( '#wpl-mustlogin' ).remove();
				}
			});

			// Handle clicking the like button itself
			$('.wpl-button > a.like').click( function(e) {
				e.preventDefault();

				var postid = $(this).parent().attr('id').split('like-')[1];
				$.post( 'http://blog.bloom.io/wp-admin/admin-ajax.php', {
					'action': 'wpl_record_stat',
					'stat_name': 'loggedout_like_click'
				} );

				var tenMins = new Date();
				tenMins.setTime( tenMins.getTime() + 600000 );
				document.cookie = 'wpl_rand=5213d4e287; expires=' + tenMins.toGMTString() + '; domain=wordpress.com; path=/;';

				$(this).parent().siblings('.wpl-count').after( '\
					<div id="wpl-mustlogin"> \
						<form action="https://bloomio.wordpress.com/wp-login.php" method="post"> \
							<p>Just one more step to like this:</p> \
							<label><span>Username</span> <input type="text" name="log" id="user_login" class="input" value="" size="20" tabindex="80" /></label> \
							<label><span>Password</span> <input type="password" name="pwd" id="user_pass" class="input" value="" size="20" tabindex="81" /></label> \
							<input type="submit" name="wp-submit" id="wp-submit" class="button-primary" value="Log In" tabindex="82" /> \
							<input type="hidden" name="postid" value="' + postid + '" /> \
							<input type="hidden" name="redirect_to" value="http://blog.bloom.io/2011/07/11/creating-new-worlds?year=2011&#038;monthnum=07&#038;day=11&#038;name=creating-new-worlds&#038;like=1" /> \
							<input type="hidden" name="wpl_rand" value="5213d4e287" /> \
							<p>Not a member yet? <a href="http://wordpress.com/signup/?ref=likebox&user=1" id="wpl-signup-link">Sign up with WordPress.com for free</a></p> \
						</form> \
					</div> \
				');

				$('#wpl-mustlogin').hide().slideDown('fast');
			} );

			$('#wpl-mustlogin input.input').live( 'focus', function() {
				$(this).prev().hide();
			}).live( 'blur', function() {
				if ( $(this).val() == '' ) {
					$(this).prev().show();
				}
			});

			$('#wpl-mustlogin input#wp-submit').live( 'click', function(e) {
				e.preventDefault();

				$.post( 'http://blog.bloom.io/wp-admin/admin-ajax.php', {
					'action': 'wpl_record_stat',
					'stat_name': 'loggedout_login_submit'
				}, function() {
					$('#wpl-mustlogin form').submit();
				} );
			});

			$('#wpl-mustlogin a#wpl-signup-link').live( 'click', function(e) {
				e.preventDefault();

				var link = $(this).attr('href');

				$.post( 'http://blog.bloom.io/wp-admin/admin-ajax.php', {
					'action': 'wpl_record_stat',
					'stat_name': 'loggedout_signup_click'
				}, function() {
					location.href = link;
				} );
			});
		})
	})(jQuery);
	/* ]]> */
	</script>
<script type='text/javascript' src='//0.gravatar.com/js/gprofiles.js?ver=201249ab'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type='text/javascript' src='http://s0.wp.com/wp-content/mu-plugins/gravatar-hovercards/wpgroho.js?m=1351637563g'></script>
<script>jQuery(document).ready(function($){ Gravatar.profile_cb = function( h, d ) { WPGroHo.syncProfileData( h, d );	}; Gravatar.my_hash = WPGroHo.my_hash; Gravatar.init( 'body', '#wp-admin-bar-my-account' ); });</script>	<div style="display:none">
	<div class="grofile-hash-map-e3adca09411887c6316d0e383b5b9833">
	</div>
	<div class="grofile-hash-map-5552c450f089c25da615db666e331137">
	</div>
	<div class="grofile-hash-map-b78446f857933a87776bffd44ec66f98">
	</div>
	<div class="grofile-hash-map-8eb29630732aecd29eb0d4de23023e12">
	</div>
	<div class="grofile-hash-map-640131890f28b9e29fd9e4a59129c428">
	</div>
	<div class="grofile-hash-map-a802d0df60da58a5399ff0f8751a30f6">
	</div>
	<div class="grofile-hash-map-c5ce2b3735ec323b56d05341b98ce335">
	</div>
	<div class="grofile-hash-map-868260cd64bf04a9636338726ad5029c">
	</div>
	<div class="grofile-hash-map-f0785fb2c95792e4f9077ae03333dd90">
	</div>
	<div class="grofile-hash-map-269a19aaad37f311480a803773e7a7c3">
	</div>
	</div>

	<div id="bit" class="loggedout-follow-normal">
		<a class="bsub" href="javascript:void(0)"><span id='bsub-text'>Follow</span></a>
		<div id="bitsubscribe">

					<h3><label for="loggedout-follow-field">Follow &ldquo;Bloom Blog&rdquo;</label></h3>

			<form action="https://subscribe.wordpress.com" method="post" accept-charset="utf-8" id="loggedout-follow">
			<p>Get every new post delivered to your Inbox.</p>

			<p id="loggedout-follow-error" style="display: none;"></p>


			<p><input type="email" name="email" style="width: 95%; padding: 1px 2px" value="Enter your email address" onfocus='this.value=(this.value=="Enter your email address") ? "" : this.value;' onblur='this.value=(this.value=="") ? "Enter email address" : this.value;'  id="loggedout-follow-field"/></p>

			<input type="hidden" name="action" value="subscribe"/>
			<input type="hidden" name="blog_id" value="18914580"/>
			<input type="hidden" name="source" value="http://blog.bloom.io/2011/07/11/creating-new-worlds/?like=1&amp;source=post_flair&amp;_wpnonce=e5382928c8"/>
			<input type="hidden" name="sub-type" value="loggedout-follow"/>

			<input type="hidden" id="_wpnonce" name="_wpnonce" value="e4d31a7af6" /><input type="hidden" name="_wp_http_referer" value="/2011/07/11/creating-new-worlds/?like=1&amp;source=post_flair&amp;_wpnonce=e5382928c8" />
			<p id='bsub-subscribe-button'><input type="submit" value="Sign me up" /></p>
			</form>
					<div id='bsub-credit'><a href="http://wordpress.com/signup/?ref=lof">Powered by WordPress.com</a></div>
		</div><!-- #bitsubscribe -->
	</div><!-- #bit -->

	<script type="text/javascript">
		WPCOM_sharing_counts = {"http:\/\/blog.bloom.io\/2011\/07\/11\/creating-new-worlds\/":177}	</script>
<script type='text/javascript' src='http://s0.wp.com/wp-content/mu-plugins/post-flair/sharing/sharing.js?m=1354922785g'></script>
		<script type="text/javascript" charset="utf-8">
		jQuery(document).ready(function(){
			jQuery( 'a.share-twitter' ).click(function(){
				window.open( jQuery(this).attr( 'href' ), 'wpcomtwitter', 'menubar=1,resizable=1,width=600,height=350' );
				return false;
			});
		});
		</script>
				<script type="text/javascript" charset="utf-8">
		jQuery(document).ready(function(){
			jQuery( 'a.share-facebook' ).click(function(){
				window.open( jQuery(this).attr( 'href' ), 'wpcomfacebook', 'menubar=1,resizable=1,width=600,height=400' );
				return false;
			});
		});
		</script>
			<div id="sharing_email" style="display: none;">
		<form action="" method="post">
			<label for="target_email">Send to Email Address</label>
			<input type="text" name="target_email" id="target_email" value="" />


				<label for="source_name">Your Name</label>
				<input type="text" name="source_name" id="source_name" value="" />

				<label for="source_email">Your Email Address</label>
				<input type="text" name="source_email" id="source_email" value="" />


			<div class="recaptcha" id="sharing_recaptcha"></div><input type="hidden" name="recaptcha_public_key" id="recaptcha_public_key" value="6LcYW8MSAAAAADBAuEH9yaPcF7lWh11Iq62ZKtoo" />
			<img style="float: right; display: none" class="loading" src="http://s2.wp.com/wp-content/mu-plugins/post-flair/sharing/images/loading.gif?m=1315610318g" alt="loading" width="16" height="16" />
			<input type="submit" value="Send Email" class="sharing_send" />
			<a href="#cancel" class="sharing_cancel">Cancel</a>

			<div class="errors errors-1" style="display: none;">
				Post was not sent - check your email addresses!			</div>

			<div class="errors errors-2" style="display: none;">
				Email check failed, please try again			</div>

			<div class="errors errors-3" style="display: none;">
				Sorry, your blog cannot share posts by email.			</div>
		</form>
	</div>
<script type='text/javascript'>
/* <![CDATA[ */
var thickboxL10n = {"next":"Next >","prev":"< Prev","image":"Image","of":"of","close":"Close","noiframes":"This feature requires inline frames. You have iframes disabled or your browser does not support them.","loadingAnimation":"http:\/\/bloomio.wordpress.com\/wp-includes\/js\/thickbox\/loadingAnimation.gif","closeImage":"http:\/\/bloomio.wordpress.com\/wp-includes\/js\/thickbox\/tb-close.png"};
var thickboxL10n = {"next":"Next >","prev":"< Prev","image":"Image","of":"of","close":"Close","noiframes":"This feature requires inline frames. You have iframes disabled or your browser does not support them.","loadingAnimation":"http:\/\/bloomio.wordpress.com\/wp-includes\/js\/thickbox\/loadingAnimation.gif","closeImage":"http:\/\/bloomio.wordpress.com\/wp-includes\/js\/thickbox\/tb-close.png"};
/* ]]> */
</script>
<script type='text/javascript' src='http://s2.wp.com/_static/??/wp-content/js/devicepx.js,/wp-includes/js/thickbox/thickbox.js?m=1354656609j'></script>
<script type="text/javascript">
// <![CDATA[
(function() {
try{
  if ( window.external &&'msIsSiteMode' in window.external) {
    if (window.external.msIsSiteMode()) {
      var jl = document.createElement('script');
      jl.type='text/javascript';
      jl.async=true;
      jl.src='/wp-content/plugins/ie-sitemode/custom-jumplist.php';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(jl, s);
    }
  }
}catch(e){}
})();
// ]]>
</script><script src="http://s.stats.wordpress.com/w.js?21" type="text/javascript"></script>
<script type="text/javascript">
st_go({'blog':'18914580','v':'wpcom','tz':'-8','user_id':'0','post':'177','subd':'bloomio'});
ex_go({'crypt':'UE40eW5QN0p8M2Y/RE1TaVhzUzFMbjdWNHpwZGhTayxPSUFCMGNrd29+Smw0c2Z8TEJNZGJPZVdBazgmTFR6WlFsLj1UVFdwUll5WFhZW1FBJVZBNUIuelNvVltnTU1nbUNxJkxkVSUtZ3hnaFh2U2Q9MSsuVzQzX1hnb3NjNGhMQVMmcE54bV9JSXRQLldMdW5YL3VpUEgvREV1LD1jRVBXZnBxcy9wVUF2OCsuWDByZHhiL3hyejY0LV1uWzNfTFI4W01MZTRyeSxON1VaMFo3TTR4a1JEWyxRYXVdV1BvVmUmU1E9anddWktGenFNalZ3V3lGLmJTWjhJQzJjMW1HajFmelBIWHZsN29IVG5PWW9bbngzR29GSl9uMSZGR19zcXhELDBEMG91RyY4cURjaw=='});
addLoadEvent(function(){linktracker_init('18914580',177);});
	</script>
<noscript><img src="http://stats.wordpress.com/b.gif?v=noscript" style="height:0px;width:0px;overflow:hidden" alt="" /></noscript>
		</div>
	</body>
</html>
